# Application Name
spring.application.name=visual-site-builder

# Server Configuration
server.port=8080

# H2 Database Configuration
spring.datasource.url=jdbc:h2:file:./data/vsddb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=true

# H2 Console (for development/debugging)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Logging
logging.level.com.flashcard=DEBUG
logging.level.org.springframework.web=INFO

# ==============================================
# CORS Configuration
# ==============================================
# Comma-separated list of allowed origins for CORS
# Use environment variable CORS_ALLOWED_ORIGINS in production
# Example: CORS_ALLOWED_ORIGINS=https://myapp.com,https://admin.myapp.com
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}
cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
cors.allow-credentials=${CORS_ALLOW_CREDENTIALS:true}

# Static Resources Configuration
# Spring Boot automatically serves content from /static, /public, /resources, /META-INF/resources
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.add-mappings=true

# React SPA - Forward all non-API routes to index.html
# This will be handled by a configuration class (Step 3)



# Plugin System Configuration
app.plugin.directory=core/plugins
app.plugin.hot-reload.enabled=true
app.plugin.validation.enabled=true

# ==============================================
# Security - Public API Endpoints
# ==============================================
# Comma-separated list of API endpoint patterns that should be publicly accessible
# without authentication. Supports Ant-style patterns.
# Use environment variable SECURITY_PUBLIC_API_PATTERNS in production
#
# Examples:
#   /api/sample/**     - All endpoints under /api/sample/
#   /api/products/*    - Direct children of /api/products/
#   /api/public/data   - Exact path match
#
# Default includes sample data endpoints for builder testing
security.public-api-patterns=${SECURITY_PUBLIC_API_PATTERNS:/api/sample/**}

# ==============================================
# JWT Authentication Configuration
# ==============================================
# IMPORTANT: In production, use a secure 256-bit key and store in environment variable
# Generate a secure key: openssl rand -base64 32
app.jwt.secret=${JWT_SECRET:dGhpcyBpcyBhIHZlcnkgbG9uZyBzZWNyZXQga2V5IGZvciBkZXZlbG9wbWVudCBwdXJwb3Nlcw==}

# Access token expiration: 15 minutes (900000 ms)
app.jwt.access-token-expiration=900000

# Refresh token expiration: 7 days (604800000 ms)
app.jwt.refresh-token-expiration=604800000

# JWT issuer
app.jwt.issuer=flashcard-cms

# ==============================================
# OAuth2 / SSO Configuration (OPTIONAL)
# ==============================================
# OAuth2 is DISABLED by default. To enable social login:
# 1. Uncomment the provider section you want to use
# 2. Set the required environment variables
# 3. Restart the application
#
# IMPORTANT: Do not uncomment without setting valid credentials,
# as Spring Boot validates OAuth2 client registrations at startup.

# --- Google OAuth2 ---
# To enable: Set GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET environment variables
# then uncomment these lines:
# spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
# spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
# spring.security.oauth2.client.registration.google.scope=openid,profile,email

# --- Okta OIDC ---
# To enable: Set OKTA_CLIENT_ID, OKTA_CLIENT_SECRET, and OKTA_ISSUER_URI
# then uncomment these lines:
# spring.security.oauth2.client.registration.okta.client-id=${OKTA_CLIENT_ID}
# spring.security.oauth2.client.registration.okta.client-secret=${OKTA_CLIENT_SECRET}
# spring.security.oauth2.client.registration.okta.scope=openid,profile,email
# spring.security.oauth2.client.provider.okta.issuer-uri=${OKTA_ISSUER_URI}

# --- Keycloak OIDC ---
# To enable: Set KEYCLOAK_CLIENT_ID, KEYCLOAK_CLIENT_SECRET, and KEYCLOAK_ISSUER_URI
# then uncomment these lines:
# spring.security.oauth2.client.registration.keycloak.client-id=${KEYCLOAK_CLIENT_ID}
# spring.security.oauth2.client.registration.keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET}
# spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
# spring.security.oauth2.client.provider.keycloak.issuer-uri=${KEYCLOAK_ISSUER_URI}

# --- Generic OIDC Provider ---
# To enable: Set OIDC_CLIENT_ID, OIDC_CLIENT_SECRET, and OIDC_ISSUER_URI
# then uncomment these lines:
# spring.security.oauth2.client.registration.oidc.client-id=${OIDC_CLIENT_ID}
# spring.security.oauth2.client.registration.oidc.client-secret=${OIDC_CLIENT_SECRET}
# spring.security.oauth2.client.registration.oidc.scope=openid,profile,email
# spring.security.oauth2.client.provider.oidc.issuer-uri=${OIDC_ISSUER_URI}